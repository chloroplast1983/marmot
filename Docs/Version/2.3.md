# 2.3

---

#### nginx镜像更新1.3版

优化nginx配置.

#### phpfpm-7.0镜像版本更新

更新为`1.1`,但是该版本只是优化了一些扩展的获取方式,去除了多线程模块.

#### 添加了错误反馈机制

根据`json-api`媒体协议添加了错误返回码.

#### 添加`phpmd`检查

初期只是添加了部分规则.

* `cleancode`
* `naming`

#### 接口添加对来源的媒体协议进行判断

如果请求媒体协议不是`json-api`,则返回`415`.

#### 对`Core`文件内输出`404`和`405`进行处理

现在是纯文本输出,修改为响应正常的状态吗

#### Core 文件可以正常的判断`DEBUG`模式和`非DEBUG`模式

解决Core文件的`DEBUG`模式的判断,可以正常缓存容器数据.

#### Core 文件对路由表进行缓存

对路由表进行缓存,代替原先

#### jsonapi添加`fields`和`include`筛选

`include`代码库暂时未添加示例.该字段可以筛选额外的`inlcude`属性.

**示例**

只查看用户的cellPhone字段

		users/1?fields[users]=cellPhone
		
		{
		    "meta": [],
		    "data": {
		        "type": "users",
		        "id": "1",
		        "attributes": {
		            "cellPhone": "15202939435"
		        },
		        "links": {
		            "self": "127.0.0.1\/users\/1"
		        }
		    }
		}
		
#### commandBus 中控制事件的发布,不再每个handler中发布事件

并且添加测试发布时间`mock`事件通知的测试用例

#### 优化仓库

减少构造函数传参,通过自己内部声明,减少传递的参数.

**优化仓库测试代码**

添加对仓库`getList`的桩,减少测试的`assert`次数.

#### 优化翻译器

#### 添加EventHandler.php 监控队列程序

这里使用多进程模式进行开发.

事件执行完成后释放mysql链接,资源释放.

#### 添加rabbitMq镜像

可以选择是否启动容器.

添加模拟发送队列程序, 用于发送测试消息队列协同测试代码.

#### 接口添加对options的请求响应
		
